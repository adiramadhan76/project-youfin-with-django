{% extends 'page/base.html' %}
{% load static %}

{% block title %}Edit Kategori{% endblock %}

{% block your_content_here %}
<div class="overlap">
    <div class="content-card">
        <h1><i class="bi bi-pencil" style="margin-right: 4px;"></i> Edit Kategori</h1>

        <!-- message -->
        <div class="message-box mt-3">
            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-dismissible fade show {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %}"
                role="alert">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <!-- /message -->

        <form method="POST">
            {% csrf_token %}
            <div class="form-group">
                <label class="my-3" for="name">Nama Kategori</label>
                <input type="text" name="name" id="name" class="form-control" value="{{ category.name }}" autocomplete="off" autofocus placeholder="Masukan nama kategori" required>
            </div>
            <div class="form-group">
                <label class="my-3" for="category_type">Jenis Kategori</label>
                <select name="category_type" id="category_type" class="form-control mb-3" required>
                    <option value="Pemasukan" {% if category.category_type == 'Pemasukan' %}selected{% endif %}>Pemasukan</option>
                    <option value="Pengeluaran" {% if category.category_type == 'Pengeluaran' %}selected{% endif %}>Pengeluaran</option>
                </select>
            </div>
            <button type="submit" class="btn btn-warning">Update Kategori</button>
            <a href="{% url 'youfin_app:kategori' %}" class="btn btn-secondary">Batal</a>
        </form>
    </div>
</div>
{% endblock %}

{% block script_kategori %}
  <script>
    // script untuk alert message
    document.addEventListener('DOMContentLoaded', function () {
        var alerts = document.querySelectorAll('.alert');
        alerts.forEach(function (alert) {
            setTimeout(function () {
                var alertElement = new bootstrap.Alert(alert);
                alertElement.close();
            }, 5000);
        });
    });
  </script>
{% endblock %}